(ns forma.source.tilesets
  (:use [clojure.set :only (union)]))

(def
  ^{:doc "MODIS tiles for the selected countries, identified by their
  ISO3 codes where each two-vector is the horizontal and vertical
  position of the MODIS tile `[mod-h mod-v]`"}
  country-tiles
  {:AGO #{[19 9] [20 9]}
   :ARG #{[11 11] [12 11] [13 12] [13 11]}
   :AUS #{[31 11] [31 10] [32 10]}
   :BDI #{[21 9] [20 9]}
   :BEN #{[18 7] [18 8]}
   :BFA #{[18 7] [17 8]}
   :BGD #{[26 6] [25 6]}
   :BHS #{[11 6] [10 6]}
   :BLZ #{[9 7]}
   :BOL #{[11 11] [11 10] [12 10] [12 11] [11 9]}
   :BRA #{[12 9] [12 8] [13 8] [13 9] [11 10] [14 9] [12 10] [12 11] [13 12] [13 11] [13 10] [14 10] [14 11] [10 9] [10 8] [11 8] [11 9]}
   :BTN #{[26 6] [25 6]}
   :CAF #{[19 8] [20 8]}
   :CHL #{[11 11] [11 10]}
   :CHN #{[28 7] [24 5] [26 6] [25 6] [27 5] [27 6] [28 6]}
   :CIV #{[17 8]}
   :CMR #{[19 8] [18 8]}
   :COD #{[19 8] [19 9] [21 9] [21 8] [20 8] [20 9]}
   :COG #{[19 8] [19 9]}
   :COL #{[11 7] [10 9] [10 8] [10 7] [11 8] [11 9]}
   :COM #{[22 10]}
   :CRI #{[9 7] [9 8]}
   :CUB #{[11 6] [11 7] [10 7] [10 6]}
   :DOM #{[11 7]}
   :ECU #{[9 9] [9 8] [10 9] [10 8]}
   :ETH #{[21 8]}
   :GAB #{[19 8] [19 9] [18 9] [18 8]}
   :GHA #{[18 7] [17 8] [18 8]}
   :GIN #{[16 8] [17 8]}
   :GLP #{[12 7]}
   :GNQ #{[19 8] [18 8]}
   :GRD #{[11 7]}
   :GTM #{[9 7]}
   :GUF #{[12 8]}
   :GUY #{[12 8] [11 8]}
   :HND #{[9 7]}
   :HTI #{[11 7] [10 7]}
   :IDN #{[29 8] [28 8] [30 9] [27 8] [31 9] [28 9] [30 8] [29 9] [27 9] [32 9]}
   :IND #{[26 7] [27 8] [24 6] [24 7] [24 5] [26 6] [25 8] [25 7] [25 6] [27 7]}
   :JAM #{[10 7]}
   :JPN #{[29 5] [29 6]}
   :KEN #{[21 9] [21 8]}
   :KHM #{[28 7] [27 7]}
   :KNA #{[12 7] [11 7]}
   :LAO #{[28 7] [27 7] [27 6]}
   :LBR #{[16 8] [17 8]}
   :LKA #{[25 8] [26 8]}
   :MDG #{[22 11] [22 10]}
   :MEX #{[9 7] [9 6] [8 6] [8 7]}
   :MLI #{[18 7]}
   :MMR #{[26 7] [27 8] [26 6] [27 7] [27 6]}
   :MWI #{[21 9]}
   :MYS #{[29 8] [28 8] [27 8]}
   :NER #{[18 7]}
   :NGA #{[19 8] [18 7] [18 8]}
   :NIC #{[9 7]}
   :NPL #{[24 6] [25 6]}
   :PAK #{[24 6] [24 5]}
   :PAN #{[9 8] [10 8]}
   :PER #{[11 10] [9 9] [10 9] [11 9]}
   :PHL #{[29 8] [29 7] [30 8] [30 7]}
   :PNG #{[33 9] [31 9] [32 10] [33 10] [32 9]}
   :PRI #{[11 7]}
   :PRK #{[27 5]}
   :PRY #{[12 10] [12 11] [13 11]}
   :REU #{[23 11]}
   :SDN #{[21 8] [20 8]}
   :SLB #{[33 9] [33 10]}
   :SLE #{[16 8]}
   :SLV #{[9 7]}
   :STP #{[18 8]}
   :SUR #{[12 8]}
   :TCD #{[19 8] [20 8]}
   :TGO #{[18 7] [18 8]}
   :THA #{[28 8] [28 7] [27 8] [27 7] [27 6]}
   :TTO #{[12 7] [11 7] [11 8]}
   :TWN #{[29 6] [28 6]}
   :TZA #{[21 9] [20 9]}
   :UGA #{[21 9] [21 8] [20 8] [20 9]}
   :URY #{[13 12] [13 11]}
   :USA #{[9 6] [8 6] [10 7] [10 6]}
   :VEN #{[12 8] [11 7] [10 8] [10 7] [11 8]}
   :VIR #{[11 7]}
   :VNM #{[28 8] [28 7] [27 7] [27 6]}
   :ZMB #{[21 9] [20 9]}})

  ;; {:BGD #{[25 6] [26 6]}
  ;;  :LAO #{[27 6] [27 7] [28 7]}
  ;;  :IDN #{[27 8] [28 8] [29 8] [30 8] [27 9] [28 9] [29 9] [30 9] [31 9] [32 9]}
  ;;  :IND #{[24 5] [24 6] [25 6] [26 6] [24 7] [25 7] [26 7] [27 7] [25 8] [27 8]}
  ;;  :MMR #{[26 6] [27 6] [26 7] [27 7] [27 8]}
  ;;  :MYS #{[27 8] [28 8] [29 8]}
  ;;  :PHL #{[29 7] [30 7] [29 8] [30 8]}
  ;;  :THA #{[27 6] [27 7] [28 7] [27 8] [28 8]}
  ;;  :VNM #{[27 6] [27 7] [28 7] [28 8]}
  ;;  :BOL #{[11 11] [11 10] [12 10] [12 11] [11 9]}
  ;;  :CHN #{[28 7] [24 5] [26 6] [25 6] [27 5] [27 6] [28 6]}
  ;;  :CIV #{[17 8]}}

(defn tile-set
  "set of unique MODIS tiles for the specified
  countries (union). Example usage:

    (tile-set [8 6] :IDN :MYS :PHL)"
  [& inputs]
  (->> inputs
       (map #(if (keyword? %)
               (country-tiles %)
               #{%}))
       (apply union)))


